<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Reactium-GraphQL-Plugin</title><meta name="description" content="Documentation for Reactium-GraphQL-Plugin"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Reactium-GraphQL-Plugin</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>Reactium-GraphQL-Plugin</h2></div><div class="tsd-panel tsd-typography"><a id="md:reactium-graphql-plugin" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Reactium GraphQL Plugin<a href="#md:reactium-graphql-plugin" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Provides an Apollo GraphQL client on Reactium.GraphQL singleton in Reactium project.</p>
<a id="md:about-this-repository" class="tsd-anchor"></a><h2 class="tsd-anchor-link">About this Repository<a href="#md:about-this-repository" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This repository is a mono-style repo (for publishing the @reactium/graphql Reactium module to the Reactium registry), but it's also a Reactium project itself, complete with an example deno GraphQL server and a Reactium example front-end that uses the @reactium/graphql module.</p>
<p>See below for if you want to play around with this repository in your local environment.</p>
<a id="md:install" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Install<a href="#md:install" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To install this module in your own Reactium project:</p>
<pre><code class="sh"><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">reactium</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@reactium/graphql</span>
</code><button type="button">Copy</button></pre>

<a id="md:usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Usage<a href="#md:usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>See <a href="https://www.apollographql.com/docs/react">Apollo Client (React)</a> documentation for full details.</p>
<p>This plugin already sets up the Apollo client as a context provider for the Reactium application, so you can begin using the <code>gql</code> with React hooks immediately.</p>
<pre><code class="jsx">import { gql, useQuery } from '@apollo/client';
import React from 'react';

const GET_USERS = gql`
    query GetUsers {
        users {
            id
            name
            email
        }
    }
`;

export const UsersList = () => {
    const { loading, error, data } = useQuery(GET_USERS);
    if (loading) return <div>Loading...</div>;
    else if (error) return <div>Error: {error}</div>;
    const { users } = data;

    return (
        <ul>
            {users.map(({ id, name, email }) => (
                <li key={id}>
                    {name}: {email}
                </li>
            ))}
        </ul>
    );
};
</code><button type="button">Copy</button></pre>

<a id="md:reactium-specific-hooks" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Reactium Specific Hooks<a href="#md:reactium-specific-hooks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>When this module is installed in a Reactium project, it exposes it's own React hooks in the @reactium/graphql workspace.</p>
<ul>
<li>
<p><strong>useSyncQuery</strong>: Wraps the Apollo GraphQL query hook, but makes it into a <a href="https://reactiumcore.github.io/reactium-sdk-core/classes/ReactiumSyncState.html">ReactiumSyncState object</a> for easier memory state management. For those used to the Reactium improved <a href="https://reactiumcore.github.io/reactium-sdk-core/functions/useSyncState.html">useSyncState hook</a> for improved component state management, with imperative state updates, as well as EventTarget extensibility and observability.</p>
<pre><code class="jsx">  import { gql } from '@apollo/client';
  import Container from 'react-bootstrap/Container';
  import Row from 'react-bootstrap/Row';
  import Col from 'react-bootstrap/Col';
  import { useHookComponent } from 'reactium-core/sdk';
  import { useSyncQuery } from '@reactium/graphql';

  const LOAD_DASHBOARD_DATA = gql`
      query LoadDashboardDat($nums: [Int!]!) {
          users {
              id
              name
              email
          }

          posts {
              id
              title
              body
          }

          add(nums: $nums)
      }
  `;

  export const Dashboard = () => {
      // Get registered components
      const PostList = useHookComponent('PostList');
      const UserList = useHookComponent('UserList');

      const handle = useSyncQuery(LOAD_DASHBOARD_DATA, {
          variables: { nums: [0, 1] },
      });

      return (
          <Container fluid as='main'>
              <h1>Dashboard {handle.get('data.add')}</h1>
              <Row>
                  <Col>
                      <UserList
                          loading={handle.get('loading', false)}
                          error={handle.get('error')}
                          users={handle.get('data.users', [])}
                      />
                  </Col>
              </Row>

              <Row>
                  <Col>
                      <PostList
                          loading={handle.get('loading', false)}
                          error={handle.get('error')}
                          posts={handle.get('data.posts', [])}
                      />
                  </Col>
              </Row>
          </Container>
      );
  };

  export default Dashboard;
</code><button type="button">Copy</button></pre>

</li>
</ul>
<a id="md:configuration" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Configuration<a href="#md:configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>There are a number of environment variables that this module will use in your Reactium project.</p>
<ul>
<li>
<p><strong>GraphQL Playground</strong> - Enabled by default in local development, disabled by default in production environment. To set the playground URL <strong>(Defaults to <code>/playground</code>)</strong>, set the environment variable <code>GRAPHQL_PLAYGROUND_URL</code></p>
<pre><code class="bash"><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">GRAPHQL_PLAYGROUND_URL</span><span class="hl-1">=</span><span class="hl-2">&quot;/my-playground&quot;</span>
</code><button type="button">Copy</button></pre>

<p>To enable playground in production, set <code>GRAPHQL_PLAYGROUND_ENABLED=on</code></p>
</li>
<li>
<p><strong>GraphQL Server URL</strong> - To set the GraphQL server URL (defaults to localhost:4000/graphql):</p>
<pre><code class="bash"><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">GRAPHQL_URL</span><span class="hl-1">=</span><span class="hl-2">&quot;https://my.graphql.host/graphql&quot;</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><strong>GraphQL Proxy</strong> - Enabled by default, Reactium will proxy <code>/graphql</code> to the GraphQL Server URL (See above). If this behavior is disabled, the Apollo Client will use your server URL directly (You will be responsible for setting up your GraphQL Server for <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS</a>). To disable proxy behavior:</p>
<pre><code class="bash"><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">GRAPHQL_PROXY_ENABLED</span><span class="hl-1">=</span><span class="hl-2">&quot;off&quot;</span>
</code><button type="button">Copy</button></pre>

<p>The default proxy URL (provided by http-proxy middleware) for your GraphQL api is <code>/graphql</code>. To change this:</p>
<pre><code class="bash"><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">GRAPHQL_PROXY_URL</span><span class="hl-1">=</span><span class="hl-2">&quot;/my-graphql-api&quot;</span>
</code><button type="button">Copy</button></pre>

<blockquote>
<p>Note: Changing this proxy URL will also change the default GraphQL Server URL (unless you have set it with <code>GRAPHQL_URL</code>)</p>
</blockquote>
</li>
</ul>
<a id="md:using-this-demo-graphql-server" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Using this demo GraphQL server<a href="#md:using-this-demo-graphql-server" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This repository has an example deno server that runs a GraphQL server.</p>
<p>See <code>./GraphQLServer</code> for the deno server. You will need to have <a href="https://docs.deno.com/runtime/manual/">deno installed</a> and configure your local mongo instance credentials, by adding the <code>MONGODB_URI</code> variable to <code>./GraphQLServer/.env</code>:</p>
<pre><code><span class="hl-5">MONGODB_URI</span><span class="hl-1">=</span><span class="hl-6">mongodb</span><span class="hl-1">:</span><span class="hl-7">//deno:denopwd@localhost:27017/deno</span>
</code><button>Copy</button></pre>

<blockquote>
<p>Example local mongodb URI</p>
</blockquote>
<p>I'd also recommend installing <a href="https://deno.land/x/denon@2.5.0/docs/installation.md?source=">denon</a> (like nodemon for deno) for easy startup of the server locally:</p>
<pre><code class="sh"><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">./GraphQLServer</span><br/><span class="hl-0">denon</span><span class="hl-1"> </span><span class="hl-2">start</span>
</code><button type="button">Copy</button></pre>

<a id="md:starting-the-ui" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Starting the UI<a href="#md:starting-the-ui" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This repository includes a Reactium project with a UI that can interact with the included Deno server.</p>
<p>To start the UI:</p>
<pre><code class="sh"><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">reactium</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-7"># first time to install dependencies (includes npm dependencies as well)</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">local</span>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:reactium-graphql-plugin"><span>Reactium <wbr/>GraphQL <wbr/>Plugin</span></a><ul><li><a href="#md:about-this-repository"><span>About this <wbr/>Repository</span></a></li><li><a href="#md:install"><span>Install</span></a></li><li><a href="#md:usage"><span>Usage</span></a></li><li><a href="#md:reactium-specific-hooks"><span>Reactium <wbr/>Specific <wbr/>Hooks</span></a></li><li><a href="#md:configuration"><span>Configuration</span></a></li><li><a href="#md:using-this-demo-graphql-server"><span>Using this demo <wbr/>GraphQL server</span></a></li><li><a href="#md:starting-the-ui"><span>Starting the UI</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>Reactium-GraphQL-Plugin</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
